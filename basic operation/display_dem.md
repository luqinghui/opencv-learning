#结合使用OpenCV与Arcpy显示dem数据

本篇教程显示dem均采用灰度值

display_dem主要包含两个函数：

使用arcpy读取dem数据和使用opencv读取dem数据

arcpy与opencv表示图像时均采用numpy数组的方式，所以两者可以互相转化使用。

使用arcpy的RasterToNumpy函数时，返回一个numpy数组，与cv2.imread()函数返回的numpy数组结构略有不同。

1. arcpy为[dim,row,col]，即第一维是波段数，然后是行列数。默认为RGB。
2. opencv为[row,col,dim]，即先是行列号，然后是波段数（opencv中也叫通道）。默认为BGR。

---

**示例**

假设有一个4*4的3波段的图像img

arcpy中得到的结果是：

	[
	
	 [[1,1,1,1],[2,2,2,2],[3,3,3,3],[4,4,4,4]],
	
	 [[5,5,5,5],[6,6,6,6],[7,7,7,7],[8,8,8,8]],
	
	 [[9,9,9,9],[10,10,10,10],[11,11,11,11],[12,12,12,12]]
	
	]

opencv中结果为：

	[
	
	 [[1,5,9],[1,5,9],[1,5,9],[1,5,9]],
	
	 [[2,6,10],[2,6,10],[2,6,10],[2,6,10]],
	
	 [[3,7,11],[3,7,11],[3,7,11],[3,7,11]],
	
	 [[4,8,12],[4,8,12],[4,8,12],[4,8,12]],
	
	]

1. 从arcpy的img拆分三个波段即为：

	band1 = img[0,:,:]
	
	band2 = img[1,:,:]
	
	band3 = img[2,:,:]

2. 从opencv的img拆分三个波段为：

	band1 = img[:,:,0]

	band2 = img[:,:,1]

	band3 = img[:,:,2]

---

> img[:,:,::-1] 快速从**BGR**转为**RGB**

> **注意：**opencv可以有1，3，4个通道